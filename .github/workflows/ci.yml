name: test
on:
  workflow_dispatch:
  pull_request:
  push:
    branches:
      - master
jobs:
  test:
    runs-on: ubuntu-22.04
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
      - run: echo "The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "The workflow is now ready to test your code on the runner."
      - name: Run dynamically linked bootstrap path
        run: |
          time ./mk_m2min &> /dev/shm/log_dynamic.txt
          tail -n 20 /dev/shm/log_dynamic.txt
      - name: Run statically linked bootstrap path
        run: |
          time ./mk_from_bootstrap_seed &> /dev/shm/log_static.txt
          tail -n 20 /dev/shm/log_static.txt
      - run: echo "This job's status is ${{ job.status }}."

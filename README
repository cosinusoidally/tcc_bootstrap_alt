The aim here is to provide an alternative bootstrap path for
https://github.com/cosinusoidally/mishmashvm/ to allow us to bootstrap tcc
without relying on an Emscripten compiled JS version of JS. This bootstrap
method goes from an adapted tcc 0.9.2 (circa 2001) all the way up to tcc 0.9.27
(the most recent official release from 2017).

Setup:

Follow the Linux setup instructions from
https://github.com/cosinusoidally/mishmashvm/ in order to set up an Ubuntu
bionic chroot, but debootstrap a buildd rather than a minbase:

sudo debootstrap --arch=i386 --variant=buildd bionic bionic

Make sure you bind mount /dev /dev/shm and /proc as per the mishmashvm
instructions as these are needed in order to allow the Mozilla Spidermonkey
shell to run. Note Spidermonkey is not a hard requirement to bootstrap tcc, it
is only needed to test the full end to end bootstrap from tcc 0.9.2 to 0.9.27 to
the mishmashvm variant of tcc 0.9.27.

When entering the chroot make sure you do setarch i686 if you are on a amd64
kernel, otherwise tcc will misbehave and try to build 64 bit binaries.

cd bionic
sudo chroot .
su foo (set up this user so we are not running as root)
setarch i686
bash

make yourself a directory to check out tcc_bootstrap_alt just to keep things
separate (the build process will touch the parent diretory of tcc_bootstrap_alt
).

from tcc_bootstrap_alt

cp -r tcc_27 ../
cd ../tcc_27
./configure --prefix=/tmp/tcc
make
make install
cd ../tcc_bootstrap_alt/
pushd .
cd /tmp/tcc/bin/
export PATH=$PWD:$PATH
popd

At this point you will be in tcc_bootstrap_alt . There are several alternative
bootstrap scripts:

./mk_2m ("minimal v2" this bootstraps from an integer only version of 0.9.2,
         this is the preferred starting point)
./mk_2  (bootstraps from a more complete version of v2)
./mk_3  (bootstraps from 0.9.3)

Just a note on notation, you'll see many tcc_X directories, these directories
correspond to tcc 0.9.X just for briefness (pretty redundant saying 0.9.X when
tcc has been on 0.9.x for 20+ years).
